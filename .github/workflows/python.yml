name: Snyk Python Scan
on: pull_request

jobs:
 security:
  runs-on: ubuntu-latest
  steps:
   - uses: actions/checkout@v3

   - name: Set up Python
     uses: actions/setup-python@v4
     with:
      python-version: '3.9'

   - name: Install dependencies
     run: |
      pip install pipenv
      pipenv install --deploy --dev

   - name: Run Snyk to check for vulnerabilities
     uses: snyk/actions/python@master
     env:
      SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
     with:
       args: --file=Pipfile
